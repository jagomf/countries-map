{"version":3,"file":"countries-map.js","sources":["ng://countries-map/app/modules/countries-map/google-charts-loader.service.ts","ng://countries-map/app/modules/countries-map/chart-events.interface.ts","ng://countries-map/app/modules/countries-map/countries-map.component.ts","ng://countries-map/app/modules/countries-map/countries-map.module.ts","ng://countries-map/countries-map.ts"],"sourcesContent":["declare var google: { charts: { load: (version: string, initializer: any) => void } };\r\n\r\nimport { Injectable, EventEmitter, LOCALE_ID, Inject } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class GoogleChartsLoaderService {\r\n\r\n  private readonly googleScriptLoadingNotifier = new EventEmitter<boolean>();\r\n  private googleScriptIsLoading = false;\r\n  private readonly localeId: string;\r\n\r\n  constructor(@Inject(LOCALE_ID) localeId: string) {\r\n    this.localeId = localeId;\r\n  }\r\n\r\n  load(apiKey?: string): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      this.loadGoogleChartsScript().then(() => {\r\n        const initializer: any = {\r\n            packages: ['geochart'],\r\n            language: this.localeId,\r\n            callback: resolve\r\n        };\r\n        if (apiKey) {\r\n          initializer.mapsApiKey = apiKey;\r\n        }\r\n        google.charts.load('45.2', initializer);\r\n      }).catch(err => reject());\r\n    });\r\n  }\r\n\r\n  private loadGoogleChartsScript(): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      if (typeof google !== 'undefined' && google.charts) {\r\n        resolve();\r\n      } else if (!this.googleScriptIsLoading) {\r\n\r\n        this.googleScriptIsLoading = true;\r\n\r\n        const script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.src = 'https://www.gstatic.com/charts/loader.js';\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.onload = () => {\r\n          this.googleScriptIsLoading = false;\r\n          this.googleScriptLoadingNotifier.emit(true);\r\n          resolve();\r\n        };\r\n        script.onerror = () => {\r\n          this.googleScriptIsLoading = false;\r\n          this.googleScriptLoadingNotifier.emit(false);\r\n          reject();\r\n        };\r\n        document.getElementsByTagName('head')[0].appendChild(script);\r\n\r\n      } else {\r\n        this.googleScriptLoadingNotifier.subscribe((loaded: boolean) => {\r\n          if (loaded) {\r\n            resolve();\r\n          } else {\r\n            reject();\r\n          }\r\n        });\r\n      }\r\n\r\n    });\r\n  }\r\n}\r\n","export interface ChartSelectEvent {\n  selected: boolean;\n  value: number | null;\n  country: string;\n}\n\nexport enum CharErrorCode {loading = 'loading'}\n\nexport interface ChartErrorEvent {\n  id: string | CharErrorCode;\n  message: string;\n  detailedMessage?: string;\n  options?: Object;\n}\n","declare var google: { visualization: { ChartWrapper, events: {\r\n  addListener: (wrapper, event: string, callback: (args?: any) => void) => void, removeListener: (event: string) => void\r\n} } };\r\n\r\nimport {\r\n  Component,\r\n  ElementRef,\r\n  OnChanges,\r\n  Input,\r\n  Output,\r\n  OnDestroy,\r\n  HostListener,\r\n  ViewChild,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport { GoogleChartsLoaderService } from './google-charts-loader.service';\r\nimport { ChartSelectEvent, ChartErrorEvent, CharErrorCode } from './chart-events.interface';\r\nimport { CountriesData, SelectionExtra, Selection, ValidCountryData } from './data-types.interface';\r\nimport { en as countriesEN } from '@jagomf/countrieslist';\r\n\r\nconst valueHolder = 'value';\r\nconst countryName = (countryCode: string): string => {\r\n  return countriesEN[countryCode];\r\n};\r\n\r\n@Component({\r\n  selector: 'countries-map',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  templateUrl: './countries-map.component.html',\r\n  styleUrls: ['./countries-map.component.css']\r\n})\r\nexport class CountriesMapComponent implements OnChanges, OnDestroy {\r\n\r\n  @Input() data: CountriesData;\r\n  @Input() apiKey: string;\r\n  @Input() options: any;\r\n  @Input() countryLabel = 'Country';\r\n  @Input() valueLabel = 'Value';\r\n  @Input() showCaption = true;\r\n  @Input() captionBelow = true;\r\n  @Input() autoResize = false;\r\n  @Input() minValue = 0;\r\n  @Input() maxValue: number;\r\n  @Input() minColor = 'white';\r\n  @Input() maxColor = 'red';\r\n  @Input() backgroundColor = 'white';\r\n  @Input() noDataColor = '#CFCFCF';\r\n  @Input() exceptionColor = '#FFEE58';\r\n\r\n  @Output() private readonly chartReady = new EventEmitter<void>();\r\n  @Output() private readonly chartError = new EventEmitter<ChartErrorEvent>();\r\n  @Output() private readonly chartSelect = new EventEmitter<ChartSelectEvent>();\r\n\r\n  @ViewChild('mapContent', { static: false }) private readonly mapContent: ElementRef;\r\n\r\n  private proportion: number;\r\n  private googleData: ValidCountryData[][];\r\n  private wrapper: any;\r\n\r\n  selection: Selection | null = null;\r\n\r\n  private innerLoading = true;\r\n  get loading() {\r\n    return this.innerLoading;\r\n  }\r\n\r\n  get selectionValue() {\r\n    return this.data[this.selection.countryId].value;\r\n  }\r\n\r\n  constructor(\r\n    private readonly cdRef: ChangeDetectorRef,\r\n    private readonly el: ElementRef,\r\n    private readonly loaderService: GoogleChartsLoaderService\r\n  ) {\r\n    this.el = el;\r\n    this.loaderService = loaderService;\r\n  }\r\n\r\n  @HostListener('window:deviceorientation')\r\n  @HostListener('window:resize')\r\n  screenSizeChanged(): void {\r\n    if (!this.loading && this.autoResize) {\r\n      const map: HTMLElement = this.mapContent.nativeElement;\r\n      map.style.setProperty('height', `${map.clientWidth * this.proportion}px`);\r\n      this.redraw();\r\n    }\r\n  }\r\n\r\n  private getExtraSelected(country: string): SelectionExtra[] | null {\r\n    const { extra } = this.data[country];\r\n    return extra && Object.keys(extra).map(key => ({ key, val: extra[key] }));\r\n  }\r\n\r\n  private selectCountry(country?: string): void {\r\n    this.selection = country ? {\r\n      countryId: country,\r\n      countryName: countryName(country),\r\n      extra: this.getExtraSelected(country)\r\n    } : null;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Convert a table (object) formatted as\r\n   * `{ GB: { value:123, ...otherdata }, ES: { value:456, ...whatever } }`\r\n   * to an array for Google Charts formatted as\r\n   * `[ ['Country', 'Value'], ['GB', 123], ['ES', 456] ]`\r\n   * and save to this.processedData\r\n   */\r\n  private processInputData(): void {\r\n    this.googleData = Object.entries(this.data).reduce((acc, [key, val]) => {\r\n      const rawValContent = val[valueHolder];\r\n      acc.push([key, rawValContent === null ? null : rawValContent ? +rawValContent.toString() : 0]);\r\n      return acc;\r\n    }, [['Country', 'Value']] as ValidCountryData[][]);\r\n  }\r\n\r\n  ngOnChanges({ data }: { data: any }): void {\r\n    if (data) {\r\n\r\n      if (!this.data) {\r\n        return;\r\n      }\r\n\r\n      const defaultOptions = {\r\n        colorAxis: {\r\n          colors: [this.minColor, this.maxColor],\r\n          minValue: Number.isInteger(this.minValue) ? this.minValue : undefined,\r\n          maxValue: Number.isInteger(this.maxValue) ? this.maxValue : undefined\r\n        },\r\n        datalessRegionColor: this.noDataColor,\r\n        backgroundColor: this.backgroundColor,\r\n        defaultColor: this.exceptionColor,\r\n        legend: this.showCaption,\r\n        tooltip: { trigger: 'none' }\r\n      };\r\n\r\n      this.loaderService.load(this.apiKey).then(() => {\r\n        this.processInputData();\r\n\r\n        this.wrapper = new google.visualization.ChartWrapper({\r\n          chartType: 'GeoChart',\r\n          dataTable: this.googleData,\r\n          options: Object.assign(defaultOptions, this.options)\r\n        });\r\n\r\n        this.registerChartWrapperEvents();\r\n        this.redraw();\r\n\r\n        const self: HTMLElement = this.el.nativeElement;\r\n        this.proportion = self.clientHeight / self.clientWidth;\r\n      }, () => {\r\n        this.onCharterror({ id: CharErrorCode.loading, message: 'Could not load' });\r\n      });\r\n    }\r\n  }\r\n\r\n  redraw(): void {\r\n    this.wrapper.draw(this.el.nativeElement.querySelector('div.cm-map-content'));\r\n  }\r\n\r\n  private onChartReady(): void {\r\n    if (this.innerLoading) {\r\n      this.innerLoading = false;\r\n      this.chartReady.emit();\r\n    }\r\n  }\r\n\r\n  private onCharterror(error: ChartErrorEvent): void {\r\n    this.chartError.emit(error);\r\n  }\r\n\r\n  private onMapSelect(): void {\r\n    const event: ChartSelectEvent = {\r\n      selected: false,\r\n      value: null,\r\n      country: null\r\n    };\r\n\r\n    const selection: any[] = this.wrapper.visualization.getSelection();\r\n\r\n    if (selection.length > 0) {\r\n      const { row: tableRow }: { row: number } = selection[0];\r\n      const dataTable = this.wrapper.getDataTable();\r\n\r\n      event.selected = true;\r\n      event.value = dataTable.getValue(tableRow, 1);\r\n      event.country = dataTable.getValue(tableRow, 0);\r\n      this.selectCountry(event.country);\r\n\r\n    } else {\r\n      this.selectCountry(null);\r\n    }\r\n\r\n    this.chartSelect.emit(event);\r\n  }\r\n\r\n  private registerChartWrapperEvents(): void {\r\n    const { addListener } = google.visualization.events;\r\n    addListener(this.wrapper, 'ready', this.onChartReady.bind(this));\r\n    addListener(this.wrapper, 'error', this.onCharterror.bind(this));\r\n    addListener(this.wrapper, 'select', this.onMapSelect.bind(this));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    const { removeListener } = google.visualization.events;\r\n    removeListener('ready');\r\n    removeListener('error');\r\n    removeListener('select');\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CountriesMapComponent } from './countries-map.component';\nimport { GoogleChartsLoaderService } from './google-charts-loader.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [CountriesMapComponent],\n  entryComponents: [CountriesMapComponent],\n  providers: [GoogleChartsLoaderService],\n  exports: [\n    CountriesMapComponent\n  ]\n})\nexport class CountriesMapModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {GoogleChartsLoaderService as Éµa} from './app/modules/countries-map/google-charts-loader.service';"],"names":["countriesEN"],"mappings":"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"}